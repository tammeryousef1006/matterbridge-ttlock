/**
 * @license
 * Copyright 2022-2025 Matter.js Authors
 * SPDX-License-Identifier: Apache-2.0
 */
import { SupportedBehaviors } from "../properties/SupportedBehaviors.js";
import { EndpointType } from "./EndpointType.js";
function MutableEndpoint(options) {
  const type = EndpointType(options);
  let defaults;
  return {
    ...type,
    get defaults() {
      if (!defaults) {
        defaults = {};
        for (const name in type.behaviors) {
          defaults[name] = type.behaviors[name].defaults;
        }
      }
      return defaults;
    },
    set(defaults2) {
      const newBehaviors = Array();
      for (const name in this.behaviors) {
        const updates = defaults2[name];
        const behavior = this.behaviors[name];
        if (updates) {
          newBehaviors.push(behavior.set(updates));
        }
      }
      return this.with(...newBehaviors);
    },
    with(...behaviors) {
      return MutableEndpoint({
        ...options,
        behaviors: SupportedBehaviors.extend(this.behaviors, behaviors)
      });
    },
    withBehaviors(...behaviors) {
      return this.with(...behaviors);
    }
  };
}
export {
  MutableEndpoint
};
//# sourceMappingURL=MutableEndpoint.js.map
